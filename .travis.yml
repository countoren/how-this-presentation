#snippet:travis yml
language:
  - nix

script:
  - "./Build.hs"
#end

after_success:
  - test "$TRAVIS_BRANCH" = "master"
  - git config --global user.email "travis-ci@travis.org"
  - git config --global user.name "Travis CI"
  - git checkout -b pdf
  - git add -f result/slides.pdf
  - git commit -m "$(date --iso-8601) @ $(git rev-list --max-count=1 --abbrev-commit $TRAVIS_BRANCH)" -m "[skip ci]"
  - git tag -f -a -m "Compilation on $(date --iso-8601) of commit $(git rev-list --max-count=1 --abbrev-commit $TRAVIS_BRANCH)" "pdf-$TRAVIS_BRANCH-$(git rev-list --max-count=1 --abbrev-commit $TRAVIS_BRANCH)"
  - git push --tags --force-with-lease https://markus1189:$GITHUB_API_KEY@github.com/markus1189/how-this-presentation pdf

env:
  secure: "mQlbqD90DyrzQODruFajfcCo7vDdBAvYRhGz3/UWFOve/5EwNB5f49eOWmOzv3ZRyIrFcEabVl2yvyp3rAiYFI4dVxUFCt1nk7wB/NdhIJQluv6NXBW2QlI0McLxVYVklHepRfLp3yoKvvr27IE/RTlwxII0gNoTuYXPhmI7RnqI/9ED0PT9ygjURMZTrxBr+WAp2FSWeZUExirlf5v4mqqPdRwQFyjI0ktiKpOX4rkZC1cRp8x4Y+sVNrYzU72A4THQfCMMDfVm3ppY4/wTo0W15ZnCtCZ2TsutAcC2++9IjJAIQWF8Fm8eL7gZ7SNl14b0/KR63EzLRoOjvCG/cPLDzD5FgUl0HiXP29sVl+acBx3c3+dQlpqVGEz9MJS24XhxFLpNgaK/CoC1dsUiH+Sitbc3qdmLCVDzHQ+CQRdvfMooDT8EQE0MQAWB17Xbpt9tm77EuDpR1Ay7+GKz3WS3JaC9+O11EFYnszrVgsk0FJ8qBKbcNLVLKrTX0nrr5w7BQKAvHwuRUqZUSi3SXclbJE7FhFXFC+KQDAGOR1/CLLsSH3eZWa43M4syR3XMg8G9FzIDYp4TvdWWbQR8MgwNiZUgH8VXjkBFWoXIN5yhF6W7pHY8e4pRhfYPp3K+6WH95+2asBvU5B+eHj2NIbq+r5xSC5LxFMVUyT9vB/s="
